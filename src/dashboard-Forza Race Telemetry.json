{"$schema":"https://dataexplorer.azure.com/static/d/schema/54/dashboard.json","id":"58302c33-2ebf-4373-bfce-bff0b5927716","eTag":"f60be593-3da7-47f6-a912-1af99662f59c","schema_version":"54","title":"Forza Race Telemetry","autoRefresh":{"enabled":false,"defaultInterval":"1s"},"tiles":[{"id":"c69e2133-b2c3-40ae-90e0-11ecf2e93633","title":"Race Results","visualType":"table","pageId":"a248c103-7046-466d-b481-0895bb8d0f1d","layout":{"x":0,"y":0,"width":17,"height":19},"queryRef":{"kind":"query","queryId":"d2b89db8-8bee-4558-b24a-9e3eb3178fa8"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"c3f3ba1f-f93c-4c80-85f5-6165ad141d53","title":"Driver","visualType":"multistat","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":0,"y":3,"width":12,"height":6},"queryRef":{"kind":"query","queryId":"cbd6e3ca-22ab-4e2e-8e33-095735038b1e"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":"Value","colorRulesDisabled":true,"colorStyle":"light","multiStat__displayOrientation":"horizontal","multiStat__labelColumn":null,"multiStat__slot":{"width":4,"height":2},"colorRules":[]}},{"id":"ccdc11e3-4bfd-4c60-9636-c59339c7acfb","title":"Lap performance","visualType":"column","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":0,"y":9,"width":12,"height":5},"queryRef":{"kind":"query","queryId":"e682a000-595a-4f09-940d-9cb0ad19a36b"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"Time (seconds)","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"legendLocation":"bottom","xColumnTitle":"Lap Number","xColumn":"Lap","yColumns":["Time"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"8f4b3358-0ffd-4023-ae6c-01f17ba450ef","title":"Steering","visualType":"column","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":12,"y":3,"width":12,"height":6},"queryRef":{"kind":"query","queryId":"6b5b7261-2050-4bb9-a134-7194c15641d2"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":["SteerValue"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"94ddc1c4-1a66-4d3f-8cc9-7658e14150ca","title":"Gear / Clutch","visualType":"column","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":12,"y":9,"width":12,"height":5},"queryRef":{"kind":"query","queryId":"e5242915-f3e9-4cb0-a8a4-5c0583fde2ea"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":["SteerValue","GearValue"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"a352faa6-20e5-49e2-9005-e0d43eb22d15","title":"Track","visualType":"multistat","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":0,"y":0,"width":16,"height":3},"queryRef":{"kind":"query","queryId":"51c40b22-460a-4963-8297-5eaa04654a87"},"visualOptions":{"multiStat__textSize":"small","multiStat__valueColumn":"Value","colorRulesDisabled":false,"colorStyle":"light","multiStat__displayOrientation":"horizontal","multiStat__labelColumn":"ColumnName","multiStat__slot":{"width":5,"height":1},"colorRules":[]}},{"id":"949b0344-bf23-4460-be49-c3c8fdec0836","title":"Latency","visualType":"card","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":20,"y":0,"width":4,"height":3},"queryRef":{"kind":"query","queryId":"7b21969f-f744-41fe-a451-5733c7f24aa8"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":null,"colorRulesDisabled":true,"colorStyle":"light","colorRules":[]}},{"id":"7a5756e0-c8f9-4c5c-b92d-7ba572797cc1","title":"Telemetry Signals","visualType":"card","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":16,"y":0,"width":4,"height":3},"queryRef":{"kind":"query","queryId":"1883ca4d-f2a3-4985-afbe-ba3bec58f9dd"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":null,"colorRulesDisabled":true,"colorStyle":"light","colorRules":[]}},{"id":"bb8e402d-6079-42d3-81db-8982176926cb","title":"Race Position","visualType":"line","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":12,"y":14,"width":12,"height":6},"queryRef":{"kind":"query","queryId":"1b7aa994-1d1d-4580-bc52-7c4756b7a24c"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":["RacePosition"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"1c205097-1d37-4489-8a2d-457f5300f6bc","title":"Tire Temp (F)","visualType":"line","pageId":"2891e6a4-998e-4b97-91e4-2f0db1eacd43","layout":{"x":0,"y":14,"width":12,"height":6},"queryRef":{"kind":"query","queryId":"30f89898-0494-4870-9d58-dd9010cfac1a"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":"StartDateTime","yColumns":["Temp"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}}],"baseQueries":[],"parameters":[{"kind":"duration","id":"31534070-f18e-4392-b9e0-c864a6790227","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"1a40ea62-c736-439e-9c8e-3bdc4293012c","displayName":"Session","description":"s","variableName":"_sessionId","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"query-result"},"dataSource":{"kind":"query","columns":{"value":"SessionId"},"queryRef":{"kind":"query","queryId":"ce735dc9-26b6-4000-8c8a-c598c52bfe9a"},"autoReset":true},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"577b1c96-bed2-4f62-a655-cf4dee91b7a3","kind":"manual-kusto","scopeId":"kusto","name":"Maverick Development","clusterUri":"https://kvc-v5qj1k2sumz776yf8p.southcentralus.kusto.windows.net/","database":"ForzaMotorsportTelemetry"},{"id":"d801e2d4-c355-429c-b75c-96eae4b3e65e","kind":"manual-kusto","scopeId":"kusto","name":"demo-cac-rta-adx","clusterUri":"https://demo-cac-rta-adx.canadacentral.kusto.windows.net/","database":"ForzaMotorsportTelemetry"}],"pages":[{"name":"Dashboard","id":"2891e6a4-998e-4b97-91e4-2f0db1eacd43"},{"name":"Testing","id":"a248c103-7046-466d-b481-0895bb8d0f1d"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"//\n// Dashboard Driver Results\n//\nlet _racePosition = toscalar(Gold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| where ChannelId == 'RacePosition'\n| extend RacePosition = toint(parse_json(Data)[0])\n| project RacePosition);\n//\nlet _bestLap = toscalar(Gold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| where ChannelId == 'BestLap'\n| extend BestLast = format_timespan(totimespan(round(todecimal(parse_json(Data)[0]), 4) * 1s), \"mm:ss.sss\")\n| project BestLast);\n//\nlet _currentRaceTime = toscalar(Gold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| where ChannelId == 'CurrentRaceTime'\n| extend CurrentRaceTime = format_timespan(totimespan(round(todecimal(parse_json(Data)[0]), 4) * 1s), \"mm:ss.sss\")\n| project CurrentRaceTime);\n//\nGold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| take 10\n//| project Position = _racePosition, CarId, Lap = LapId + 1, BestLapTime = _bestLap, SessionId, CurrentRaceTime =_currentRaceTime","id":"d2b89db8-8bee-4558-b24a-9e3eb3178fa8","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"//\n// Dashboard Driver Track Results\n//\nlet _racePosition = toscalar(Gold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| where ChannelId == 'RacePosition'\n| extend value = toint(parse_json(Data)[0])\n| project value);\n//\nlet _lapNumber = toscalar(Gold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| where ChannelId == 'LapNumber'\n| extend value = toint(parse_json(Data)[0])\n| project value);\n//\nlet _lapStats = Silver_RaceTelemetry\n| summarize arg_max(tolong(Timespan.StartTS), *) by ChannelId, CarId, SessionId, LapId\n| where SessionId == _sessionId\n| where ChannelId == 'CurrentLap'\n| extend Time = round(todecimal(parse_json(Data)[0]), 4)\n| order by LapId asc   \n| project Lap = LapId + 1,\n  Time,\n  Diff = round(Time - prev(Time, 1), 4),\n  PrevLapTime = prev(Time, 1);\n//\nlet _currentLapTime = toscalar(_lapStats \n| order by Lap desc \n| take 1\n| project Time);\n//\nlet _lastLapTime = toscalar(_lapStats \n| order by Lap desc \n| take 1\n| project PrevLapTime);\n//\nlet _currentLapDiff = toscalar(_lapStats \n| order by Lap desc \n| take 1\n| project Diff);\n//\nlet _bestLapTime = toscalar(_lapStats \n| order by Time asc \n| take 1\n| project Time);\n//\n//let _lastLap = toscalar(Gold_RaceTelemetry_Deduped\n//| where SessionId == _sessionId\n//| where ChannelId == 'LastLap'\n//| extend value = round(todecimal(parse_json(Data)[0]), 4)\n//| project value);\n//\n//let _lastLapx = toscalar(Silver_RaceTelemetry\n//| summarize arg_max(tolong(Timespan.StartTS), *) by ChannelId, CarId, SessionId, LapId\n//| where SessionId == _sessionId\n//| where ChannelId == 'CurrentLap'\n//| where LapId == _lapNumber -1 \n//| extend value = round(todecimal(parse_json(Data)[0]), 4)\n//| project value);\n//\n//let _lastLapy = toscalar(Silver_RaceTelemetry\n//| summarize arg_max(tolong(Timespan.StartTS), *) by ChannelId, CarId, SessionId, LapId\n//| where SessionId == _sessionId\n//| where ChannelId == 'CurrentLap'\n//| extend Time = round(todecimal(parse_json(Data)[0]), 4)\n//| order by LapId asc \n//| take 1 \n//| project LapId + 1, Diff = round(Time - prev(Time, 1), 4));\n//\n//let _currentLap = toscalar(Gold_RaceTelemetry_Deduped\n//| where SessionId == _sessionId\n//| where ChannelId == 'CurrentLap'\n//| extend value = round(todecimal(parse_json(Data)[0]), 4)\n//| project value);\n//\n//let _bestLap = toscalar(Gold_RaceTelemetry_Deduped\n//| where SessionId == _sessionId\n//| where ChannelId == 'BestLap'\n//| extend value = round(todecimal(parse_json(Data)[0]), 4)\n//| project value);\n//\nlet _currentRaceTime = toscalar(Gold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| where ChannelId == 'CurrentRaceTime'\n| extend CurrentRaceTime = round(todecimal(parse_json(Data)[0]), 4)\n| project CurrentRaceTime);\n//\n//let _distinaceTraveled = toscalar(Gold_RaceTelemetry_Deduped\n//| where SessionId == _sessionId\n//| where ChannelId == 'DistanceTraveled'\n//| extend value = toint(parse_json(Data)[0])\n//| project value);\n//\nlet _raceDetail = Gold_RaceTelemetry_Deduped\n| where SessionId == _sessionId\n| take 1\n| project SessionId,     \n    CarId, \n    Position = tostring(_racePosition), \n    Lap = tostring(_lapNumber + 1),\n    CurrentLap = format_timespan(totimespan(round(_currentLapTime, 4) * 1s), \"mm:ss.sss\"),     \n    //TimeGain = format_timespan(totimespan(round(_lastLapy - _lastLapx, 4) * 1s), \"mm:ss.sss\"),\n    TimeGain = format_timespan(totimespan(round(_currentLapDiff, 4) * 1s), \"mm:ss.sss\"),\n    //LastLap = format_timespan(totimespan(round(_lastLapx, 4) * 1s), \"mm:ss.sss\"),\n    LastLap = format_timespan(totimespan(round(_lastLapTime, 4) * 1s), \"mm:ss.sss\"),\n    //BestLap = format_timespan(totimespan(round(_bestLap, 4) * 1s), \"mm:ss.sss\"), \n    BestLap = format_timespan(totimespan(round(_bestLapTime, 4) * 1s), \"mm:ss.sss\"), \n    CurrentRaceTime = format_timespan(totimespan(round(_currentRaceTime, 4) * 1s), \"mm:ss.sss\");//,\n    //Distance = tostring(_distinaceTraveled);\n//\nlet _finalResults = \nunion \n(\n    _raceDetail | project ColumnOrder = 1, ColumnName = 'CarId', Value = CarId\n),\n(\n    _raceDetail | project ColumnOrder = 2, ColumnName = 'Position', Value = Position\n),\n(\n    _raceDetail | project ColumnOrder = 3, ColumnName = 'Lap', Value = Lap\n),\n(\n    _raceDetail | project ColumnOrder = 4, ColumnName = 'Current Lap', Value = CurrentLap\n),\n(\n    _raceDetail | project ColumnOrder = 8, ColumnName = 'Time Gain', Value = TimeGain\n),\n(\n    _raceDetail | project ColumnOrder = 7, ColumnName = 'Last Lap', Value = LastLap\n),\n(\n    _raceDetail | project ColumnOrder = 6, ColumnName = 'Best Lap', Value = BestLap\n),\n(\n    _raceDetail | project ColumnOrder = 5, ColumnName = 'Race Time', Value = CurrentRaceTime\n);\n//(\n//    _raceDetail | project ColumnOrder = 8, ColumnName = 'Distance', Value = Distance\n//);\n//\n_finalResults\n| order by ColumnOrder asc ","id":"cbd6e3ca-22ab-4e2e-8e33-095735038b1e","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"Silver_RaceTelemetry\n| summarize arg_max(tolong(Timespan.StartTS), *) by ChannelId, CarId, SessionId, LapId\n| where SessionId == _sessionId\n| where ChannelId == 'CurrentLap'\n| extend Time = round(todecimal(parse_json(Data)[0]), 4)\n| order by LapId asc   \n| project Lap = LapId + 1,\n  Time,\n  Diff = round(Time - prev(Time, 1), 4)\n","id":"e682a000-595a-4f09-940d-9cb0ad19a36b","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"Silver_RaceTelemetry\n| where SessionId == _sessionId\n| where ChannelId == 'Steer'\n| extend SteerValue = toint(parse_json(Data)[0])\n| extend TimeValue = format_timespan(totimespan(StartDateTime), \"mm:ss.sss\")\n| project SteerValue, TimeValue\n| order by TimeValue asc \n","id":"6b5b7261-2050-4bb9-a134-7194c15641d2","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"Silver_RaceTelemetry\n| where SessionId == _sessionId\n| where ChannelId == 'Gear'\n| where toint(parse_json(Data)[0]) < 8\n| extend GearValue = toint(parse_json(Data)[0])\n| extend TimeValue = format_timespan(totimespan(StartDateTime), \"mm:ss.sss\")\n| project GearValue, TimeValue\n| order by TimeValue asc ","id":"e5242915-f3e9-4cb0-a8a4-5c0583fde2ea","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"let _trackDetail = Silver_RaceTelemetry//Gold_LapSignal_Deduped\n| where SessionId == _sessionId\n| take 1\n| project Track_Circuit, Track_Name, Track_Length_KM, Track_Location, Track_Country_IOC_Code;\n//\nlet _finalTrackData = \nunion \n(\n    _trackDetail | project ColumnOrder = 1, ColumnName = 'Circuit', Value = Track_Circuit\n),\n(\n    _trackDetail | project ColumnOrder = 2, ColumnName = 'Name', Value = Track_Name\n),\n(\n    _trackDetail | project ColumnOrder = 3, ColumnName = 'Length', Value = strcat(tostring(Track_Length_KM), \" KM\")\n),\n(\n    _trackDetail | project ColumnOrder = 4, ColumnName = 'Location', Value = Track_Location\n),\n(\n    _trackDetail | project ColumnOrder = 5, ColumnName = 'Country', Value = Track_Country_IOC_Code\n);\n//\n_finalTrackData\n| order by ColumnOrder asc ","id":"51c40b22-460a-4963-8297-5eaa04654a87","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"Bronze_RaceTelemetry\n| where eventData.SessionId == _sessionId\n| extend IngestionTime = ingestion_time()\n| extend OriginalTime = unixtime_milliseconds_todatetime(['eventStartTS'])\n| extend Latency = IngestionTime - OriginalTime\n| order by IngestionTime desc\n| take 1\n| project format_timespan(Latency, \"mm:ss.sss\")\n","id":"7b21969f-f744-41fe-a451-5733c7f24aa8","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"Silver_RaceTelemetry\n| where SessionId == _sessionId\n| count","id":"1883ca4d-f2a3-4985-afbe-ba3bec58f9dd","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"Silver_RaceTelemetry\n| where SessionId == _sessionId\n| where ChannelId == 'RacePosition'\n| extend RacePosition = toint(parse_json(Data)[0])\n| extend TimeValue = format_timespan(totimespan(StartDateTime), \"hh:mm:ss.sss\")\n| project RacePosition, TimeValue\n| order by TimeValue asc ","id":"1b7aa994-1d1d-4580-bc52-7c4756b7a24c","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"Silver_RaceTelemetry\n| where SessionId == _sessionId\n| where ChannelId == 'TireTempFrontLeft' or ChannelId == 'TireTempFrontRight' or ChannelId == 'TireTempRearLeft' or ChannelId == 'TireTempRearRight'\n| order by StartDateTime\n| project ChannelId, Temp = toint(parse_json(Data)[0]), StartDateTime;\n","id":"30f89898-0494-4870-9d58-dd9010cfac1a","usedVariables":["_sessionId"]},{"dataSource":{"kind":"inline","dataSourceId":"577b1c96-bed2-4f62-a655-cf4dee91b7a3"},"text":"//set query_results_cache_max_age = time(1h);\nGold_RaceTelemetry_Deduped\n| distinct tostring(SessionId)\n| order by SessionId desc  \n","id":"ce735dc9-26b6-4000-8c8a-c598c52bfe9a","usedVariables":[]}]}